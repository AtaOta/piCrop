const Cropper_Wrapper=document.querySelector(".Cropper_Wrapper");let Cropper_Wrapper_Dimension=Cropper_Wrapper.getBoundingClientRect(),crXbigining=Cropper_Wrapper_Dimension.left,crYbigining=Cropper_Wrapper_Dimension.top;const el=document.querySelector(".item");el.style.left=`${(Cropper_Wrapper.clientWidth-el.clientWidth)/2+crXbigining}px`,el.style.top=`${(Cropper_Wrapper.clientHeight-el.clientHeight)/2+crYbigining}px`;let Cropping_IMG=document.querySelector(".Cropping_IMG");Cropping_IMG.style.width=`${Cropper_Wrapper.clientWidth}px`,Cropping_IMG.style.top=`${(Cropper_Wrapper.clientHeight-Cropping_IMG.clientHeight)/2}px`;let leImg=Cropping_IMG.getBoundingClientRect(),isResizing=!1;window.addEventListener("resize",()=>{el.getBoundingClientRect();el.style.width="100px",el.style.height="100px";let e=(Cropper_Wrapper_Dimension=Cropper_Wrapper.getBoundingClientRect()).left,t=Cropper_Wrapper_Dimension.top;el.style.left=`${(Cropper_Wrapper.clientWidth-el.clientWidth)/2+e}px`,el.style.top=`${(Cropper_Wrapper.clientHeight-el.clientHeight)/2+t}px`,Cropping_IMG.style.width=`${Cropper_Wrapper.clientWidth}px`,Cropping_IMG.style.top=`${(Cropper_Wrapper.clientHeight-Cropping_IMG.clientHeight)/2}px`,leImg=Cropping_IMG.getBoundingClientRect()});const cll_cropper_movement_function=(e,t)=>{let i=Cropper_Wrapper.getBoundingClientRect(),n=i.left,l=i.top,o=i.left+Cropper_Wrapper.clientWidth,p=i.top+Cropper_Wrapper.clientHeight;const r=el.getBoundingClientRect();leImg=Cropping_IMG.getBoundingClientRect();let c=r.top,s=r.left,d=el.clientWidth,h=el.clientHeight;el.style.left=`${s-e}px`,el.style.top=`${c-t}px`,s<n?el.style.left=`${n}px`:c<l?el.style.top=`${l}px`:s+d>o?el.style.left=`${o-d}px`:c+h>p?el.style.top=`${p-h}px`:s<leImg.left?el.style.left=`${leImg.left}px`:c<leImg.top?el.style.top=`${leImg.top}px`:s+d>leImg.left+Cropping_IMG.clientWidth?el.style.left=`${leImg.left+Cropping_IMG.clientWidth-el.clientWidth}px`:c+h>leImg.top+Cropping_IMG.clientHeight-5&&(el.style.top=`${leImg.top+Cropping_IMG.clientHeight-el.clientHeight-5}px`)};function touchstart(e){let t=e.touches[0];window.addEventListener("touchmove",l),window.addEventListener("touchend",function e(){window.removeEventListener("touchmove",l);window.removeEventListener("touchend",e);window.removeEventListener("touchstart",touchstart)});let i=t.clientX,n=t.clientY;function l(e){let t=e.touches[0];if(!isResizing){let e=i-t.clientX,l=n-t.clientY;cll_cropper_movement_function(e,l),i=t.clientX,n=t.clientY}}}function mousedown(e){window.addEventListener("mousemove",n),window.addEventListener("mouseup",function e(){window.removeEventListener("mousemove",n);window.removeEventListener("mouseup",e)});let t=e.clientX,i=e.clientY;function n(e){let n=e;if(!isResizing){let e=t-n.clientX,l=i-n.clientY;cll_cropper_movement_function(e,l),t=n.clientX,i=n.clientY}}}el.addEventListener("touchstart",touchstart),el.addEventListener("mousedown",mousedown);const resizers=document.querySelectorAll(".resizer");let currentResizer;const cll_resizer_function=(e,t,i,n,l,o,p,r,c)=>{e.classList.contains("se")&&t.clientX<=r&&t.clientY<=c?(el.style.width=`${i.width-(n-t.clientX)}px`,el.style.height=`${i.height-(l-t.clientY)}px`):e.classList.contains("sw")&&t.clientX>=o&&t.clientY<=c?(el.style.width=`${i.width+(n-t.clientX)}px`,el.style.height=`${i.height-(l-t.clientY)}px`,el.style.left=`${i.left-(n-t.clientX)}px`):e.classList.contains("ne")&&t.clientX<r&&t.clientY>=p?(el.style.width=`${i.width-(n-t.clientX)}px`,el.style.height=`${i.height+(l-t.clientY)}px`,el.style.top=`${i.top-(l-t.clientY)}px`):e.classList.contains("nw")&&t.clientX>=o&&t.clientY>=p&&(el.style.width=`${i.width+(n-t.clientX)}px`,el.style.height=`${i.height+(l-t.clientY)}px`,el.style.top=`${i.top-(l-t.clientY)}px`,el.style.left=`${i.left-(n-t.clientX)}px`)};for(let e of resizers){function touchstart(t){currentResizer=t.target;let i=t.touches[0],n=i.clientX,l=i.clientY;window.addEventListener("touchmove",u),window.addEventListener("touchend",function e(){window.removeEventListener("touchmove",u);window.removeEventListener("touchend",e);isResizing=!1});let o=3*e.clientWidth,p=Cropper_Wrapper.getBoundingClientRect(),r=p.left,c=p.top,s=Cropper_Wrapper.clientWidth,d=Cropper_Wrapper.clientHeight,h=p.left+s,g=p.top+d;function u(e){isResizing=!0;let t=e.touches[0];const i=el.getBoundingClientRect();i.width<=s&&i.height<=d&&i.width>=o&&i.height>=o?(cll_resizer_function(currentResizer,t,i,n,l,r,c,h,g),n=t.clientX,l=t.clientY):i.width>s?el.style.width=`${s}px`:i.height>d?el.style.height=`${d}px`:i.width<o?el.style.width=`${o}px`:i.height<o&&(el.style.height=`${o}px`)}}function mousedown(t){currentResizer=t.target;let i=t.clientX,n=t.clientY;window.addEventListener("mousemove",g),window.addEventListener("mouseup",function e(){window.removeEventListener("mousemove",g);window.removeEventListener("mouseup",e);isResizing=!1});let l=3*e.clientWidth,o=Cropper_Wrapper.getBoundingClientRect(),p=o.left,r=o.top,c=Cropper_Wrapper.clientWidth,s=Cropper_Wrapper.clientHeight,d=o.left+c,h=o.top+s;function g(e){isResizing=!0;let t=e;const o=el.getBoundingClientRect();o.width<=c&&o.height<=s&&o.width>=l&&o.height>=l?(cll_resizer_function(currentResizer,t,o,i,n,p,r,d,h),i=t.clientX,n=t.clientY):o.width>c?el.style.width=`${c}px`:o.height>s?el.style.height=`${s}px`:o.width<l?el.style.width=`${l}px`:o.height<l&&(el.style.height=`${l}px`)}}e.addEventListener("touchstart",touchstart),e.addEventListener("mousedown",mousedown)}const PostionImage=(e,t)=>{let i=Cropping_IMG.getBoundingClientRect(),n=el.getBoundingClientRect(),l=el.clientHeight,o=el.clientWidth,p=Cropping_IMG.clientHeight,r=Cropping_IMG.clientWidth,c=n.top+l-(p+Cropper_Wrapper_Dimension.top),s=i.top+p,d=n.top+l,h=n.left+o-(r+Cropper_Wrapper_Dimension.left),g=i.left+r,u=n.left+o;Cropping_IMG.style.left=`${i.left-e-Cropper_Wrapper_Dimension.left}px`,Cropping_IMG.style.top=`${i.top-t-Cropper_Wrapper_Dimension.top}px`,i.left>n.left?Cropping_IMG.style.left=`${n.left-Cropper_Wrapper_Dimension.left}px`:i.top>n.top?Cropping_IMG.style.top=`${n.top-Cropper_Wrapper_Dimension.top}px`:s<d+5?Cropping_IMG.style.top=`${c+5}px`:g<u&&(Cropping_IMG.style.left=`${h}px`)};function IMGmousedown(e){let t=e.clientX,i=e.clientY;function n(e){let n=t-e.clientX,l=i-e.clientY;PostionImage(n,l),t=e.clientX,i=e.clientY}window.addEventListener("mousemove",n),window.addEventListener("mouseup",function e(){window.removeEventListener("mousemove",n);window.removeEventListener("mouseup",e)})}function IMGtouchstart(e){let t=e.touches[0],i=t.clientX,n=t.clientY;function l(e){let t=e.touches[0],l=i-t.clientX,o=n-t.clientY;PostionImage(l,o),i=t.clientX,n=t.clientY}window.addEventListener("touchmove",l),window.addEventListener("touchend",function e(){window.removeEventListener("touchmove",l);window.removeEventListener("touchend",e)})}Cropping_IMG.addEventListener("mousedown",IMGmousedown),Cropping_IMG.addEventListener("touchstart",IMGtouchstart);